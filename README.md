# ü§ñ Telegram Bot –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞–º–∏

–ë–æ—Ç –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –º–µ—Ä–µ–∂–µ–≤–∏–º–∏ –ø—Ä–∏—Å—Ç—Ä–æ—è–º–∏ —á–µ—Ä–µ–∑ Telegram –∑ —Å–∏—Å—Ç–µ–º–æ—é –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É —Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—ñ–≤.

## üöÄ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:
- **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–æ—É—Ç–µ—Ä–∞–º–∏** - –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—ñ–≤ —á–µ—Ä–µ–∑ SSH
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É** - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞
- **–ë–µ–∑–ø–µ–∫–∞** - –ø–∞—Ä–æ–ª—å–Ω–∞ –∑–∞—Ö–∏—Å—Ç –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
- **–õ–æ–≥—É–≤–∞–Ω–Ω—è** - –¥–µ—Ç–∞–ª—å–Ω–µ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö –¥—ñ–π
- **–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏
- **–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

### –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞:
- `/start` - –ø–æ—á–∞—Ç–æ–∫ —Ä–æ–±–æ—Ç–∏ –∑ –±–æ—Ç–æ–º
- `/run_script` - –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç—ñ–≤ –Ω–∞ —Ä–æ—É—Ç–µ—Ä–∞—Ö
- `/access_management` - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º (—Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤)

## üìã –í–∏–º–æ–≥–∏

- Python 3.7+
- Telegram Bot Token
- SSH –¥–æ—Å—Ç—É–ø –¥–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ñ–≤
- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Ä–æ—É—Ç–µ—Ä—ñ–≤

## üõ† –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
```bash
git clone <repository-url>
cd telegram_bot
```

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
```bash
python -m venv venv
venv\Scripts\activate  # Windows
source venv/bin/activate  # Linux/Mac
```

### 3. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 1. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –±–æ—Ç–∞ (`config.py`)
```python
BOT_TOKEN = "–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞"
ADMIN_1_ID = "ID_–ø–µ—Ä—à–æ–≥–æ_–∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞"
ADMIN_2_ID = "ID_–¥—Ä—É–≥–æ–≥–æ_–∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞"
SCRIPT_PASSWORD_MODE = True  # True - –∑–∞–ø–∏—Ç—É–≤–∞—Ç–∏ –ø–∞—Ä–æ–ª—å, False - —Ç—ñ–ª—å–∫–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è
```

### 2. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ä–æ—É—Ç–µ—Ä—ñ–≤ (`routers.json`)
```json
{
  "admins": ["440127888"],
  "router_name": {
    "ip": "192.168.1.1",
    "username": "admin",
    "ssh_password": "password",
    "ssh_port": 22,
    "script_password": "script_password",
    "allowed_users": ["user_id_1", "user_id_2"],
    "scripts": ["script1", "script2"]
  }
}
```

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
```
telegram_bot/
‚îú‚îÄ‚îÄ logs/           # –õ–æ–≥–∏ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ venv/           # –í—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
‚îú‚îÄ‚îÄ bot.py          # –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ config.py       # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ constants.py    # –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ —Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ router_manager.py    # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–æ—É—Ç–µ—Ä–∞–º–∏
‚îú‚îÄ‚îÄ access_manager.py    # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º
‚îú‚îÄ‚îÄ user_state_manager.py # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–∞–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îú‚îÄ‚îÄ admin_notifier.py    # –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤
‚îú‚îÄ‚îÄ keyboard_utils.py    # –£—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è –∫–ª–∞–≤—ñ–∞—Ç—É—Ä
‚îî‚îÄ‚îÄ requirements.txt     # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
```

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
```bash
venv\Scripts\activate  # Windows
source venv/bin/activate  # Linux/Mac
```

### 2. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
python bot.py
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏
- –í—ñ–¥–ø—Ä–∞–≤—Ç–µ `/start` –±–æ—Ç—É –≤ Telegram
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ –ø–∞–ø—Ü—ñ `logs/`

## üîß –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –î–ª—è –∑–≤–∏—á–∞–π–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:
1. **–ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç—ñ–≤:**
   - –í—ñ–¥–ø—Ä–∞–≤—Ç–µ `/run_script`
   - –í–∏–±–µ—Ä—ñ—Ç—å —Ä–æ—É—Ç–µ—Ä –∑—ñ —Å–ø–∏—Å–∫—É
   - –í–∏–±–µ—Ä—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
   - –í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å (—è–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ)
   - –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

2. **–ü–µ—Ä–µ–≥–ª—è–¥ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ä–æ—É—Ç–µ—Ä—ñ–≤:**
   - –ë–æ—Ç –ø–æ–∫–∞–∂–µ —Ç—ñ–ª—å–∫–∏ —Ç—ñ —Ä–æ—É—Ç–µ—Ä–∏, –¥–æ —è–∫–∏—Ö —É –≤–∞—Å —î –¥–æ—Å—Ç—É–ø

### –î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤:
1. **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–æ—Å—Ç—É–ø–æ–º:**
   - –í—ñ–¥–ø—Ä–∞–≤—Ç–µ `/access_management`
   - –î–æ–¥–∞–≤–∞–π—Ç–µ/–≤–∏–¥–∞–ª—è–π—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
   - –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

2. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:**
   - –û—Ç—Ä–∏–º—É–π—Ç–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –≤—Å—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
   - –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø—É

## üîí –ë–µ–∑–ø–µ–∫–∞

### –†—ñ–≤–Ω—ñ –∑–∞—Ö–∏—Å—Ç—É:
- **–†—ñ–≤–µ–Ω—å 1:** –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ —Å–ø–∏—Å–∫—É –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö
- **–†—ñ–≤–µ–Ω—å 2:** –ü–∞—Ä–æ–ª—å–Ω–∞ –∑–∞—Ö–∏—Å—Ç –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—ñ–≤
- **–†—ñ–≤–µ–Ω—å 3:** –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
- **–†—ñ–≤–µ–Ω—å 4:** –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö —Å–ø—Ä–æ–± –¥–æ—Å—Ç—É–ø—É

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:
- –†–µ–≥—É–ª—è—Ä–Ω–æ –∑–º—ñ–Ω—é–π—Ç–µ –ø–∞—Ä–æ–ª—ñ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å–∏–ª—å–Ω—ñ –ø–∞—Ä–æ–ª—ñ –¥–ª—è —Å–∫—Ä–∏–ø—Ç—ñ–≤
- –û–±–º–µ–∂—É–π—Ç–µ –¥–æ—Å—Ç—É–ø —Ç—ñ–ª—å–∫–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
- –ú–æ–Ω—ñ—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—ñ–¥–æ–∑—Ä—ñ–ª—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

## üìä –õ–æ–≥—É–≤–∞–Ω–Ω—è

### –¢–∏–ø–∏ –ª–æ–≥—ñ–≤:
- `bot.log` - –∑–∞–≥–∞–ª—å–Ω—ñ –ª–æ–≥–∏ –±–æ—Ç–∞
- `access_attempts.log` - —Å–ø—Ä–æ–±–∏ –¥–æ—Å—Ç—É–ø—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

### –†–æ—Ç–∞—Ü—ñ—è –ª–æ–≥—ñ–≤:
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä: 10MB –¥–ª—è bot.log, 5MB –¥–ª—è access_attempts.log
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω–∏—Ö –∫–æ–ø—ñ–π: 5 –¥–ª—è bot.log, 3 –¥–ª—è access_attempts.log

## üêõ –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏:
1. **–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è SSH:**
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ IP, –ø–æ—Ä—Ç —Ç–∞ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ
   - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ SSH —É–≤—ñ–º–∫–Ω–µ–Ω–æ –Ω–∞ —Ä–æ—É—Ç–µ—Ä—ñ

2. **–ü–æ–º–∏–ª–∫–∞ –¥–æ—Å—Ç—É–ø—É:**
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –¥–æ–¥–∞–Ω–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–æ —Å–ø–∏—Å–∫—É –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

3. **–ü–æ–º–∏–ª–∫–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç–∞:**
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–∞—Ä–æ–ª—å —Å–∫—Ä–∏–ø—Ç–∞
   - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Å–∫—Ä–∏–ø—Ç —ñ—Å–Ω—É—î –Ω–∞ —Ä–æ—É—Ç–µ—Ä—ñ

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

–¶–µ–π –ø—Ä–æ—î–∫—Ç –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ —Ç–∞ –¥–æ—Ç—Ä–∏–º—É–π—Ç–µ—Å—å –ø–æ–ª—ñ—Ç–∏–∫ –±–µ–∑–ø–µ–∫–∏ –≤–∞—à–æ—ó –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó.

## ü§ù –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–î–ª—è —Ç–µ—Ö–Ω—ñ—á–Ω–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—è –¥–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤ —Å–∏—Å—Ç–µ–º–∏ –∞–±–æ —Å—Ç–≤–æ—Ä—é–π—Ç–µ issues —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó –ø—Ä–æ—î–∫—Ç—É. 